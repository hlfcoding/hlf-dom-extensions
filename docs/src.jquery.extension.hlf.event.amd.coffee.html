<!doctype html>  <html> <head>   <title>jquery.extension.hlf.event.amd.coffee</title>   <meta charset="utf-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>        <div id="jump_to">       Jump To &hellip;        <div id="jump_wrapper">   <form id="jump_search_wrapper" name="jump_search_form">     <input id="jump_search" name="jump_search" type="text" placeholder="Search..." tabindex="1">     <a id="clear_search" href="#" title="Clear">x</a>   </form>    <div id="jump_scroller">     <div id="jump_page">                         <a class="source" href="src.jquery.extension.hlf.core.amd.coffee.html"            title="src/jquery.extension.hlf.core.amd.coffee" data-path="src/jquery.extension.hlf.core.amd.coffee">           jquery.extension.hlf.core.amd         </a>                         <a class="source" href="index.html"            title="src/jquery.extension.hlf.core.coffee" data-path="src/jquery.extension.hlf.core.coffee">           jquery.extension.hlf.core         </a>                         <a class="source" href="src.jquery.extension.hlf.event.amd.coffee.html"            title="src/jquery.extension.hlf.event.amd.coffee" data-path="src/jquery.extension.hlf.event.amd.coffee">           jquery.extension.hlf.event.amd         </a>                         <a class="source" href="src.jquery.extension.hlf.event.coffee.html"            title="src/jquery.extension.hlf.event.coffee" data-path="src/jquery.extension.hlf.event.coffee">           jquery.extension.hlf.event         </a>                         <a class="source" href="src.jquery.hlf.tip.coffee.html"            title="src/jquery.hlf.tip.coffee" data-path="src/jquery.hlf.tip.coffee">           jquery.hlf.tip         </a>                         <a class="source" href="src.ui.canvas-app.coffee.html"            title="src/ui.canvas-app.coffee" data-path="src/ui.canvas-app.coffee">           ui.canvas-app         </a>            </div>   </div> </div>     </div>        <div id="scroller">       <table id="doc_page" cellpadding="0" cellspacing="0" data-path="src/jquery.extension.hlf.event.amd.coffee">         <thead>           <tr>             <th class="docs">               <h1>                 jquery.extension.hlf.event.amd.coffee               </h1>             </th>             <th class="code">             </th>           </tr>         </thead>         <tbody>                                     <tr id="section-1">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-1">&#182;</a>                 </div>                 <p>HLF Event jQuery Extension v1.0
Released under the MIT License</p>               </td>               <td class="code">                 <div class="highlight"><pre><span class="nx">define</span> <span class="p">[</span><span class="s">&#39;jquery&#39;</span><span class="p">,</span> <span class="s">&#39;underscore&#39;</span><span class="p">,</span> <span class="s">&#39;jquery.extension.hlf.core&#39;</span><span class="p">],</span> <span class="nf">($, _, NS) -&gt;</span></pre></div>               </td>             </tr>                                     <tr id="section-2">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-2">&#182;</a>                 </div>                 <h1>jQuery Event Extension</h1>               </td>               <td class="code">                 <div class="highlight"><pre></pre></div>               </td>             </tr>                                     <tr id="section-3">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-3">&#182;</a>                 </div>                 <p>Composed of three parts:</p>

<ol>
<li>Extend main namespace with properties to store global state.</li>
<li>Private functions to implement certain behaviors.</li>
<li>Adapting the behaviors to custom events.</li>
</ol>               </td>               <td class="code">                 <div class="highlight"><pre></pre></div>               </td>             </tr>                                     <tr id="section-4">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-4">&#182;</a>                 </div>                 <h2>Hover-intent</h2>

<p>Basically a distance check with a delay to throttle mouse-enter. Allows for
customization based on sensitivity to movement. Unlike the jQuery <code>mouseenter</code>
and <code>mouseleave</code> events, these custom ones provide <code>pageX</code> and <code>pageY</code> values.</p>               </td>               <td class="code">                 <div class="highlight"><pre>  <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">NS</span><span class="p">,</span>
    <span class="nv">hoverIntent:</span>
      <span class="nv">debug: </span><span class="kc">off</span>
      <span class="nv">sensitivity: </span><span class="mi">8</span>
      <span class="nv">interval: </span><span class="mi">300</span>
      <span class="nv">toString: </span><span class="nf">(context) -&gt;</span>
        <span class="k">switch</span> <span class="nx">context</span>
          <span class="k">when</span> <span class="s">&#39;data&#39;</span> <span class="k">then</span> <span class="s">&#39;hlfHoverIntent&#39;</span>
          <span class="k">when</span> <span class="s">&#39;log&#39;</span>  <span class="k">then</span> <span class="s">&#39;hover-intent:&#39;</span>
          <span class="k">else</span> <span class="s">&#39;hlf.HoverIntent&#39;</span>
    <span class="nv">mouse:</span>
      <span class="nv">x:</span>
        <span class="nv">current: </span><span class="mi">0</span>
        <span class="nv">previous: </span><span class="mi">0</span>
      <span class="nv">y:</span>
        <span class="nv">current: </span><span class="mi">0</span>
        <span class="nv">previous: </span><span class="mi">0</span>

  <span class="nx">do</span> <span class="nf">(ns=NS.hoverIntent, m=NS.mouse) -&gt;</span>

    <span class="nv">nsDat = </span><span class="nx">ns</span><span class="p">.</span><span class="nx">toString</span> <span class="s">&#39;data&#39;</span>
    <span class="nv">nsLog = </span><span class="nx">ns</span><span class="p">.</span><span class="nx">toString</span> <span class="s">&#39;log&#39;</span>
    <span class="nv">dat = </span><span class="nf">(name) -&gt;</span> <span class="s">&quot;</span><span class="si">#{</span><span class="nx">nsDat</span><span class="si">}#{</span><span class="nx">name</span><span class="si">}</span><span class="s">&quot;</span>
    <span class="nv">log = </span><span class="k">if</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">debug</span> <span class="o">is</span> <span class="kc">on</span> <span class="k">then</span> <span class="nx">NS</span><span class="p">.</span><span class="nx">log</span> <span class="k">else</span> <span class="nx">$</span><span class="p">.</span><span class="nx">noop</span>

    <span class="nv">check = </span><span class="nf">(evt) -&gt;</span></pre></div>               </td>             </tr>                                     <tr id="section-5">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-5">&#182;</a>                 </div>                 <p><code>$t</code> for trigger.</p>               </td>               <td class="code">                 <div class="highlight"><pre>      <span class="nv">$t = </span><span class="nx">$</span> <span class="nx">@</span></pre></div>               </td>             </tr>                                     <tr id="section-6">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-6">&#182;</a>                 </div>                 <ul>
<li>Get state.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>      <span class="nv">intentional = </span><span class="nx">$t</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">dat</span><span class="p">())</span> <span class="o">or</span> <span class="kc">yes</span> <span class="c1"># Default to show at first.</span>
      <span class="nv">timer = </span><span class="nx">$t</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">dat</span><span class="p">(</span><span class="s">&#39;Timer&#39;</span><span class="p">))</span> <span class="o">or</span> <span class="p">{</span> <span class="nv">cleared: </span><span class="kc">no</span><span class="p">,</span> <span class="nx">timeout</span><span class="o">:</span><span class="kc">null</span> <span class="p">}</span>
      <span class="nv">sensitivity = </span><span class="nx">$t</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">dat</span><span class="p">(</span><span class="s">&#39;Sensitivity&#39;</span><span class="p">))</span> <span class="o">or</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">sensitivity</span>
      <span class="nv">interval = </span><span class="nx">$t</span><span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">dat</span><span class="p">(</span><span class="s">&#39;Interval&#39;</span><span class="p">))</span> <span class="o">or</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">interval</span></pre></div>               </td>             </tr>                                     <tr id="section-7">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-7">&#182;</a>                 </div>                 <ul>
<li>Guard.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>      <span class="k">if</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="s">&#39;mouseleave&#39;</span>
        <span class="k">if</span> <span class="nx">timer</span><span class="p">.</span><span class="nx">cleared</span> <span class="o">is</span> <span class="kc">no</span></pre></div>               </td>             </tr>                                     <tr id="section-8">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-8">&#182;</a>                 </div>                 <ul>
<li>Clear state.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>          <span class="nx">clearTimeout</span> <span class="nx">timer</span><span class="p">.</span><span class="nx">timeout</span>
          <span class="nx">$t</span><span class="p">.</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">dat</span><span class="p">(</span><span class="s">&#39;Timer&#39;</span><span class="p">)).</span><span class="nx">removeData</span><span class="p">(</span><span class="nx">dat</span><span class="p">())</span></pre></div>               </td>             </tr>                                     <tr id="section-9">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-9">&#182;</a>                 </div>                 <ul>
<li>Trigger.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>        <span class="nx">$t</span><span class="p">.</span><span class="nx">trigger</span> <span class="s">&#39;truemouseleave&#39;</span>
        <span class="nx">log</span> <span class="nx">nsLog</span><span class="p">,</span> <span class="s">&#39;truemouseleave&#39;</span>
        <span class="k">return</span>
      <span class="k">return</span> <span class="k">if</span> <span class="nx">timer</span><span class="p">.</span><span class="nx">cleared</span> <span class="o">is</span> <span class="kc">no</span> <span class="o">and</span> <span class="nx">timer</span><span class="p">.</span><span class="nx">timeout</span><span class="o">?</span></pre></div>               </td>             </tr>                                     <tr id="section-10">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-10">&#182;</a>                 </div>                 <ul>
<li>Test.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>      <span class="nv">timer.timeout = </span><span class="nx">setTimeout</span> <span class="o">-&gt;</span></pre></div>               </td>             </tr>                                     <tr id="section-11">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-11">&#182;</a>                 </div>                 <p>log nsLog, 'timeout'
- Measure and track.</p>               </td>               <td class="code">                 <div class="highlight"><pre>        <span class="nv">intentional = </span><span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">x</span><span class="p">.</span><span class="nx">previous</span> <span class="o">-</span> <span class="nx">m</span><span class="p">.</span><span class="nx">x</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">m</span><span class="p">.</span><span class="nx">y</span><span class="p">.</span><span class="nx">previous</span> <span class="o">-</span> <span class="nx">m</span><span class="p">.</span><span class="nx">y</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">sensitivity</span>
        <span class="nv">intentional = </span><span class="nx">intentional</span>
        <span class="nv">m.x.previous = </span><span class="nx">evt</span><span class="p">.</span><span class="nx">pageX</span>
        <span class="nv">m.y.previous = </span><span class="nx">evt</span><span class="p">.</span><span class="nx">pageY</span>
        <span class="k">if</span> <span class="nx">intentional</span> <span class="o">is</span> <span class="kc">yes</span> <span class="o">and</span> <span class="nx">evt</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="s">&#39;mouseover&#39;</span></pre></div>               </td>             </tr>                                     <tr id="section-12">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-12">&#182;</a>                 </div>                 <ul>
<li>Trigger.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>          <span class="nx">$t</span><span class="p">.</span><span class="nx">trigger</span> <span class="k">new</span> <span class="nx">$</span><span class="p">.</span><span class="nx">Event</span> <span class="s">&#39;truemouseenter&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nv">pageX: </span><span class="nx">m</span><span class="p">.</span><span class="nx">x</span><span class="p">.</span><span class="nx">current</span><span class="p">,</span> <span class="nv">pageY: </span><span class="nx">m</span><span class="p">.</span><span class="nx">y</span><span class="p">.</span><span class="nx">current</span> <span class="p">}</span>
          <span class="nx">log</span> <span class="nx">nsLog</span><span class="p">,</span> <span class="s">&#39;truemouseenter&#39;</span></pre></div>               </td>             </tr>                                     <tr id="section-13">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-13">&#182;</a>                 </div>                 <ul>
<li>Save state.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>        <span class="nv">timer.cleared = </span><span class="kc">yes</span>
        <span class="nx">$t</span><span class="p">.</span><span class="nx">data</span> <span class="nx">dat</span><span class="p">(),</span> <span class="nx">intentional</span>
        <span class="nx">$t</span><span class="p">.</span><span class="nx">data</span> <span class="nx">dat</span><span class="p">(</span><span class="s">&#39;Timer&#39;</span><span class="p">),</span> <span class="nx">timer</span>
      <span class="p">,</span> <span class="nx">interval</span></pre></div>               </td>             </tr>                                     <tr id="section-14">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-14">&#182;</a>                 </div>                 <ul>
<li>Save state.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>      <span class="nv">timer.cleared = </span><span class="kc">no</span>
      <span class="nx">$t</span><span class="p">.</span><span class="nx">data</span> <span class="nx">dat</span><span class="p">(</span><span class="s">&#39;Timer&#39;</span><span class="p">),</span> <span class="nx">timer</span>


    <span class="nv">track = </span><span class="nf">(evt) -&gt;</span>
      <span class="nv">m.x.current = </span><span class="nx">evt</span><span class="p">.</span><span class="nx">pageX</span>
      <span class="nv">m.y.current = </span><span class="nx">evt</span><span class="p">.</span><span class="nx">pageY</span>

    <span class="nv">$.event.special.truemouseenter =</span>
      <span class="nv">setup: </span><span class="nf">(data, namespaces) -&gt;</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="kc">on</span>
          <span class="nv">mouseover: </span> <span class="nx">check</span>
          <span class="nv">mousemove: </span> <span class="nx">track</span>

      <span class="nv">teardown: </span><span class="nf">(data, namespaces) -&gt;</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="kc">off</span>
          <span class="nv">mouseover: </span> <span class="nx">check</span>
          <span class="nv">mousemove: </span> <span class="nx">track</span>

    <span class="nv">$.event.special.truemouseleave =</span>
      <span class="nv">setup: </span><span class="nf">(data, namespaces) -&gt;</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="kc">on</span>
          <span class="nv">mouseleave: </span><span class="nx">check</span>

      <span class="nv">teardown: </span><span class="nf">(data, namespaces) -&gt;</span>
        <span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">).</span><span class="kc">off</span>
          <span class="nv">mouseleave: </span><span class="nx">check</span>



  <span class="k">return</span> <span class="kc">yes</span> <span class="c1"># Loaded.</span>

</pre></div>               </td>             </tr>                    </tbody>       </table>     </div>   </div>   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>   <script src="docco-client.js"></script>        <script>       docco = window.docco || {};       docco.no_results_tpl = function(vars){         vars.msg = vars.msg || 'No results.';         return '<div class="menu-item no-results">'+vars.msg+'</div>';        };       docco.sticky_item_tpl = function(vars){         if (!vars.path || !vars.href) { return; }         return '<a class="source sticky" href="'+vars.href+'"'+             'title="'+vars.path+'" data-path="'+vars.path+'">'+             vars.path.split('/').pop().split('.').shift()+             '<span class="remove" title="Remove sticky">x</span>'+           '</a>';       };     </script>    </body> </html> 