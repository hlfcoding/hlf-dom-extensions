<!doctype html>  <html> <head>   <title>jquery.extension.hlf.core.coffee</title>   <meta charset="utf-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>        <div id="jump_to">       Jump To &hellip;        <div id="jump_wrapper">   <form id="jump_search_wrapper" name="jump_search_form">     <input id="jump_search" name="jump_search" type="text" placeholder="Search..." tabindex="1">     <a id="clear_search" href="#" title="Clear">x</a>   </form>    <div id="jump_scroller">     <div id="jump_page">                         <a class="source" href="src.jquery.extension.hlf.core.amd.coffee.html"            title="src/jquery.extension.hlf.core.amd.coffee" data-path="src/jquery.extension.hlf.core.amd.coffee">           jquery.extension.hlf.core.amd         </a>                         <a class="source" href="index.html"            title="src/jquery.extension.hlf.core.coffee" data-path="src/jquery.extension.hlf.core.coffee">           jquery.extension.hlf.core         </a>                         <a class="source" href="src.jquery.extension.hlf.event.amd.coffee.html"            title="src/jquery.extension.hlf.event.amd.coffee" data-path="src/jquery.extension.hlf.event.amd.coffee">           jquery.extension.hlf.event.amd         </a>                         <a class="source" href="src.jquery.extension.hlf.event.coffee.html"            title="src/jquery.extension.hlf.event.coffee" data-path="src/jquery.extension.hlf.event.coffee">           jquery.extension.hlf.event         </a>                         <a class="source" href="src.jquery.hlf.tip.coffee.html"            title="src/jquery.hlf.tip.coffee" data-path="src/jquery.hlf.tip.coffee">           jquery.hlf.tip         </a>                         <a class="source" href="src.ui.canvas-app.coffee.html"            title="src/ui.canvas-app.coffee" data-path="src/ui.canvas-app.coffee">           ui.canvas-app         </a>            </div>   </div> </div>      </div>        <div id="scroller">       <table id="doc_page" cellpadding="0" cellspacing="0" data-path="src/jquery.extension.hlf.core.coffee">         <thead>           <tr>             <th class="docs">               <h1>                 jquery.extension.hlf.core.coffee               </h1>             </th>             <th class="code">             </th>           </tr>         </thead>         <tbody>                                     <tr id="section-1">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-1">&#182;</a>                 </div>                 <p>HLF Core jQuery Extension v1.0 <br />
Released under the MIT License <br />
Written with jQuery 1.7.2  </p>               </td>               <td class="code">                 <div class="highlight"><pre><span class="nv">$ = </span><span class="nx">jQuery</span>

<span class="k">if</span> <span class="o">not</span> <span class="nx">_</span><span class="o">?</span> <span class="k">then</span> <span class="k">throw</span> <span class="s">&quot;UnderscoreJS required.&quot;</span>

<span class="nv">_.templateSettings = interpolate: </span><span class="sr">/\{\{(.+?)\}\}/g</span>

<span class="nv">$.hlf =</span>
  <span class="nv">createPlugin: </span><span class="nf">(ns, apiClass, asSingleton=no) -&gt;</span>
    <span class="nv">ns.apiClass = </span><span class="nx">apiClass</span>
    <span class="nv">nsEvt = </span><span class="nx">ns</span><span class="p">.</span><span class="nx">toString</span> <span class="s">&#39;event&#39;</span>
    <span class="nv">nsDat = </span><span class="nx">ns</span><span class="p">.</span><span class="nx">toString</span> <span class="s">&#39;data&#39;</span>
    <span class="k">return</span> <span class="nf">(opt, $ctx) -&gt;</span>
      <span class="nv">$el = </span><span class="kc">null</span> <span class="c1"># Set to right scope.</span>
      <span class="nv">boilerplate = </span><span class="o">-&gt;</span>
        <span class="nv">$root = </span><span class="k">if</span> <span class="nx">asSingleton</span> <span class="o">is</span> <span class="kc">no</span> <span class="k">then</span> <span class="nx">$el</span> <span class="k">else</span> <span class="nx">$ctx</span>
        <span class="nx">$root</span><span class="p">.</span><span class="nx">addClass</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">toString</span> <span class="s">&#39;class&#39;</span>
        <span class="nx">apiClass</span><span class="o">::</span><span class="nx">_evt</span> <span class="o">?=</span> <span class="nf">(name) -&gt;</span> <span class="s">&quot;</span><span class="si">#{</span><span class="nx">name</span><span class="si">}#{</span><span class="nx">nsEvt</span><span class="si">}</span><span class="s">&quot;</span>
        <span class="nx">apiClass</span><span class="o">::</span><span class="nx">_dat</span> <span class="o">?=</span> <span class="nf">(name) -&gt;</span> <span class="s">&quot;</span><span class="si">#{</span><span class="nx">nsDat</span><span class="si">}#{</span><span class="nx">name</span><span class="si">}</span><span class="s">&quot;</span>
        <span class="nx">apiClass</span><span class="o">::</span><span class="nx">_log</span> <span class="o">?=</span> <span class="k">if</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">debug</span> <span class="o">is</span> <span class="kc">on</span> <span class="k">then</span> <span class="nx">$</span><span class="p">.</span><span class="nx">hlf</span><span class="p">.</span><span class="nx">log</span> <span class="k">else</span> <span class="nx">$</span><span class="p">.</span><span class="nx">noop</span>
        <span class="nx">apiClass</span><span class="o">::</span><span class="nx">_nsLog</span> <span class="o">?=</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">toString</span> <span class="s">&#39;log&#39;</span>
        <span class="nx">$root</span><span class="p">.</span><span class="nx">data</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="k">new</span> <span class="nx">apiClass</span> <span class="nx">$el</span><span class="p">,</span> <span class="nx">opt</span><span class="p">,</span> <span class="nx">$ctx</span>
      
      <span class="nx">$ctx</span> <span class="o">?=</span> <span class="nx">$</span> <span class="s">&#39;body&#39;</span></pre></div>               </td>             </tr>                                     <tr id="section-2">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-2">&#182;</a>                 </div>                 <ul>
<li>Try returning existing plugin api if no options are passed in.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>      <span class="nv">api = </span><span class="nx">@first</span><span class="p">().</span><span class="nx">data</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">toString</span><span class="p">()</span>
      <span class="k">return</span> <span class="nx">api</span> <span class="k">if</span> <span class="nx">api</span><span class="o">?</span> <span class="o">and</span> <span class="o">not</span> <span class="nx">opt</span><span class="o">?</span></pre></div>               </td>             </tr>                                     <tr id="section-3">               <td class="docs">                 <div class="pilwrap">                   <a class="pilcrow" href="#section-3">&#182;</a>                 </div>                 <ul>
<li>Re-apply plugin.</li>
</ul>               </td>               <td class="code">                 <div class="highlight"><pre>      <span class="nv">opt = </span><span class="nx">$</span><span class="p">.</span><span class="nx">extend</span> <span class="p">(</span><span class="nx">deep</span><span class="o">=</span><span class="kc">on</span><span class="p">),</span> <span class="p">{},</span> <span class="nx">ns</span><span class="p">.</span><span class="nx">defaults</span><span class="p">,</span> <span class="nx">opt</span>
      
      <span class="k">if</span> <span class="nx">asSingleton</span> <span class="o">is</span> <span class="kc">no</span>
        <span class="k">return</span> <span class="nx">@each</span> <span class="o">-&gt;</span>
          <span class="nv">$el = </span><span class="nx">$</span><span class="p">(</span><span class="nx">@</span><span class="p">)</span>
          <span class="nx">boilerplate</span><span class="p">()</span>
        
      <span class="k">else</span>
        <span class="nv">$el = </span><span class="nx">@</span>
        <span class="nx">boilerplate</span><span class="p">()</span>
      
    
  
  <span class="nv">debug: </span><span class="kc">on</span> <span class="c1"># Turn this off when going to production.</span>
  <span class="nv">toString: </span><span class="o">-&gt;</span> <span class="s">&#39;hlf&#39;</span>

<span class="nv">$.hlf.log = </span><span class="k">if</span> <span class="nx">$</span><span class="p">.</span><span class="nx">hlf</span><span class="p">.</span><span class="nx">debug</span> <span class="o">is</span> <span class="kc">off</span> <span class="k">then</span> <span class="nx">$</span><span class="p">.</span><span class="nx">noop</span> <span class="k">else</span>
  <span class="p">(</span><span class="k">if</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">bind</span> <span class="k">then</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">console</span><span class="p">)</span> <span class="k">else</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">)</span>

</pre></div>               </td>             </tr>                    </tbody>       </table>     </div>   </div>   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>   <script src="docco-client.js"></script>        <script>       docco = window.docco || {};       docco.no_results_tpl = function(vars){         vars.msg = vars.msg || 'No results.';         return '<div class="menu-item no-results">'+vars.msg+'</div>';        };       docco.sticky_item_tpl = function(vars){         if (!vars.path || !vars.href) { return; }         return '<a class="source sticky" href="'+vars.href+'"'+             'title="'+vars.path+'" data-path="'+vars.path+'">'+             vars.path.split('/').pop().split('.').shift()+             '<span class="remove" title="Remove sticky">x</span>'+           '</a>';       };     </script>    </body> </html> 