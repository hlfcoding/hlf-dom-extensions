<!DOCTYPE html><html lang="en"><head><title>tests/js/tip</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../"><meta name="groc-document-path" content="tests/js/tip"><meta name="groc-project-path" content="tests/js/tip.js"><link rel="stylesheet" type="text/css" media="all" href="../../assets/style.css"><script type="text/javascript" src="../../assets/behavior.js"></script><body><div id="meta"><div class="file-path">tests/js/tip.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="hlf-tip-visual-tests">HLF Tip Visual Tests</h1>
<p><a href="../../../tests/tip.visual.html">Page</a> | <a href="../../src/js/tip.html">Source</a></p></div></div><div class="code"><div class="wrapper">(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
<span class="hljs-pi">  'use strict'</span>;
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.guard &amp;&amp; !guard.isNavigatorSupported) { <span class="hljs-keyword">return</span>; }

  <span class="hljs-built_in">require</span>.config({ baseUrl: <span class="hljs-string">'../'</span>, paths: { hlf: <span class="hljs-string">'dist'</span>, test: <span class="hljs-string">'tests/js'</span> } });
  define([<span class="hljs-string">'test/base'</span>, <span class="hljs-string">'hlf/tip'</span>], <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(base, Tip)</span> </span>{
    <span class="hljs-keyword">let</span> tests = [];
    <span class="hljs-keyword">const</span> { createVisualTest, placeholderText, runVisualTests } = base;</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="default">Default</h2>
<p>Basic test with the default settings. Tip should entirely follow mouse.
Tip size should change when switching between links.</p>
<p>Note: <code>contextElement</code> also needs to be passed in, and it should be an
ancestor element of all trigger elements.</p></div></div><div class="code"><div class="wrapper">    tests.push(createVisualTest({
      label: <span class="hljs-string">'by default'</span>,
      template({ placeholderText }) {
        <span class="hljs-keyword">return</span> (
`&lt;p&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"trigger"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"link details"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"javascript:"</span>&gt;</span>tooltip trigger<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span> &amp;middot;
  <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"trigger"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"${placeholderText.short}"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"javascript:"</span>&gt;</span>tooltip trigger<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span> &amp;middot;
  <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"trigger"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"${placeholderText.long}"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"javascript:"</span>&gt;</span>tooltip trigger<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>`
        );
      },
      test(testElement) {
        let triggerElements = testElement.querySelectorAll('[title]');
        let tip = Tip.extend(triggerElements, { contextElement: testElement });
      },
      anchorName: 'default',
      className: 'default-call',
      vars: { placeholderText },
    }));</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="snapping-vertically">Snapping Vertically</h2>
<p>Snapping tooltips are created via the <code>snapTo</code> option. This one should
snap to an appropriate x position, along the y axis and the trigger&#39;s
most fitting edge (left or right). Here it should snap to the right.</p>
<p>Also note the append button and each new item automatically becoming a
trigger.</p></div></div><div class="code"><div class="wrapper">    tests.push(createVisualTest({
      label: <span class="hljs-string">'snapping with a list'</span>,
      template({ itemCount, placeholderText }) {
        <span class="hljs-keyword">let</span> itemsHtml = <span class="hljs-string">''</span>;
        [...Array(itemCount)].forEach((_, i) =&gt; {
          itemsHtml += (
`&lt;li&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"trigger"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"This is list item ${i + 1} in detail."</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"javascript:"</span>&gt;</span>tooltip trigger<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>`
          );
        });
        return (
`<span class="hljs-tag">&lt;<span class="hljs-title">ul</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"list"</span>&gt;</span>
  ${itemsHtml}
<span class="hljs-tag">&lt;/<span class="hljs-title">ul</span>&gt;</span>`
        );
      },
      footerHtml: `<span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"list-append"</span>&gt;</span>load more<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>`,
      beforeTest(testElement) {
        const { vars } = this;
        createVisualTest.setupAppendButton({
          testElement,
          listSelector: '.list',
          onAppend(newElement) {
            vars.itemCount += 1;
            let triggerElement = newElement.querySelector('[title]');
            triggerElement.title = triggerElement.title.replace(/\d/, vars.itemCount);
          },
        });
      },
      test(testElement) {
        let triggerElements = (contextElement) =&gt; (contextElement.querySelectorAll('[title]'));
        let tip = Tip.extend(triggerElements, { contextElement: testElement, snapTo: 'y' });
      },
      anchorName: 'snapping-vertically',
      className: 'list-call',
      vars: { itemCount: 3, placeholderText },
    }));</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="snapping-horizontally">Snapping Horizontally</h2>
<p>Change the <code>snapTo</code> value from <code>y</code> to <code>x</code>, and this one should snap to an
appropriate y position, along the trigger&#39;s top or bottom edge.</p></div></div><div class="code"><div class="wrapper">    tests.push(createVisualTest({
      label: <span class="hljs-string">'snapping with a bar'</span>,
      template({ itemCount, placeholderText }) {
        <span class="hljs-keyword">let</span> itemsHtml = <span class="hljs-string">''</span>;
        [...Array(itemCount)].forEach((_, i) =&gt; {
          itemsHtml += (
`&lt;a <span class="hljs-keyword">class</span>=<span class="hljs-string">"trigger"</span> title=<span class="hljs-string">"This is bar item ${i + 1} in detail."</span> href=<span class="hljs-string">"javascript:"</span>&gt;tooltip trigger&lt;<span class="hljs-regexp">/a&gt;`
          );
        });
        return (
`&lt;nav class="bar"&gt;
  ${itemsHtml}
&lt;/</span>nav&gt;`
        );
      },
      test(testElement) {
        <span class="hljs-keyword">let</span> triggerElements = testElement.querySelectorAll(<span class="hljs-string">'[title]'</span>);
        <span class="hljs-keyword">let</span> tip = Tip.extend(triggerElements, { contextElement: testElement, snapTo: <span class="hljs-string">'x'</span> });
      },
      anchorName: <span class="hljs-string">'snapping-horizontally'</span>,
      className: <span class="hljs-string">'bar-call'</span>,
      vars: { itemCount: <span class="hljs-number">3</span>, placeholderText },
    }));</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="a-model-use-case">A Model Use Case</h2>
<p>The above examples could suffice with Bootstrap tooltip or others. Snap
and shift behavior without redundantly toggling appearance really makes a
difference when hovering over a grid of small individual content pieces,
ie. avatar images.</p></div></div><div class="code"><div class="wrapper">    tests.push(createVisualTest({
      label: <span class="hljs-string">'snapping with a grid'</span>,
      template({ itemCount }) {
        <span class="hljs-keyword">let</span> itemsHtml = <span class="hljs-string">''</span>;
        [...Array(itemCount)].forEach((_, i) =&gt; {
          itemsHtml += (
`&lt;li&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"resources/avatar.png"</span> <span class="hljs-attribute">alt</span>=<span class="hljs-value">"This is avatar ${i + 1} in detail."</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>`
          );
        });
        return (
`<span class="hljs-tag">&lt;<span class="hljs-title">ul</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"grid"</span>&gt;</span>
  ${itemsHtml}
<span class="hljs-tag">&lt;/<span class="hljs-title">ul</span>&gt;</span>`
        );
      },
      test(testElement) {
        let triggerElements = testElement.querySelectorAll('[alt]');
        let tip = Tip.extend(triggerElements, { contextElement: testElement, snapTo: 'x' });
      },
      anchorName: 'a-model-use-case',
      className: 'grid-call',
      vars: { itemCount: 24 },
    }));</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="corner-cases">Corner Cases</h2>
<p>Base tips also anchor themselves to the trigger based on available space.
Here we change the <code>snapTo</code> value to <code>trigger</code> to lock the tip into place
and prevent mouse following.</p></div></div><div class="code"><div class="wrapper">    tests.push(createVisualTest({
      label: <span class="hljs-string">'snapping to corners'</span>,
      template({ placeholderText }) {
        <span class="hljs-keyword">return</span> (
`&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"box"</span> style=<span class="hljs-string">"height:6em"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"trigger edge top right"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"${placeholderText.short}"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"javascript:"</span>&gt;</span>
    top right corner
  <span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"trigger edge bottom left"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"${placeholderText.short}"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"javascript:"</span>&gt;</span>
    bottom left corner
  <span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"trigger edge bottom right"</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"${placeholderText.short}"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"javascript:"</span>&gt;</span>
    bottom right corner
  <span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>`
        );
      },
      test(testElement) {
        let triggerElements = testElement.querySelectorAll('[title]');
        let tip = Tip.extend(triggerElements, { contextElement: testElement, snapTo: 'trigger' });
      },
      anchorName: 'corner-cases',
      className: 'corners-call',
      vars: { placeholderText },
    }));

    runVisualTests(tests);
  });

}());
</span></div></div></div></div></body></html>